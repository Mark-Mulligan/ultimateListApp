<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Google fonts-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Rubik&family=Ubuntu&display=swap" rel="stylesheet">

    <!-- Font Awesome-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/styles.css">

    <title>Ultimate List App</title>
</head>

<body>
    <div class="page-background">
        <div class="container">
            <div class="input-container">
                <div class="text-center list-index-title-container mb-4">
                    <div class="">
                    </div>
                    <div class="">
                        <h2>My Lists</h2>
                    </div>
                    <div class="">
                        <a href="/logout"><button type="button" class="btn btn-outline mb-3 logout-btn">Logout</button></a>
                    </div>
                </div>
                
                <!-- <h2>My Lists</h2> -->
                <form action="/lists" method="GET">
                    <div class="form-group text-left">
                        <input class="form-control" name="name" type="text" placeholder="Search For A List..."
                            <% if (locals.searchOptions != null) { %>value="<%= searchOptions.name %>" <% } %>>
                    </div>
                    <button type="submit" class="btn btn-outline mr-2 mb-3">Search</button>
                    <a href="/lists"><button type="button" class="btn btn-outline mr-2 mb-3">View All</button></a>
                    <a href="/lists/new" class="btn btn-outline mr-2 mb-3">New List</a>
                </form>

                <div class="lists-container">
                    <hr>
                    <!-- <div class="container mt-4">
                        <div class="row">
                            <div class="col">
                                <h4>List Name</h4>
                            </div>
                            <div class="col">
                                <h4>Options</h4>
                            </div>
                        </div>
                        <hr>
                    </div> -->

                    <!-- Modal -->
                    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Are you sure you want to delete
                                        this list?
                                    </h5>

                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">

                                    <form class="modal-list-form" action="" method="POST">
                                        <div class="modal-input-container gone">
                                            <label for="newName">New List Name:</label>
                                            <input type="text" name="newName"
                                                class="text-center modal-input form-control mb-3">
                                            <input type="hidden" class="hidden-list-id" name="listId" value="">
                                        </div>
                                        <button type="submit"
                                            class="btn btn-secondary mr-4 modal-btn-accept">Yes</button>
                                        <button type="button" class="btn btn-secondary modal-btn-cancel"
                                            data-dismiss="modal">No</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- YOU NEED TO PUT THE EJS MARKINGS BACK IN FOR THIS CODE BEFORE UNCOMMENTING (MUTLIPLE AREAS, CHECK ORIGINAL)-->

                <% if (lists.length === 0) { %>
                    <div class="list-overiew-container container mb-3">
                        <div class="row">
                            <div class="col">
                                <div class="no-lists-text">You currently have no lists.</div>
                            </div>
                        </div>
                    </div>
                <% } %>    

                <% lists.forEach(list => {  %>
                    <div class="list-overview-container container mb-3">
                        <div class="row">
                            <div class="col-md-6 col-12 d-flex align-items-center justify-content-center mb-2">
                                <a href="/lists/<%= list._id %>"" class="list"><%= list.name %></a>
                            </div>
                            <div class="col-md-6 col-12">
                                <div class="edit-btns-container">
                                    <a href="/lists/<%= list._id %>" class="btn btn-outline">View</a>
                                    <button class="btn btn-outline index-edit-btn" data-toggle="modal"
                                        data-target="#exampleModalCenter" value="<%= list._id%>">Edit</button>
                                    <button class="btn btn-outline index-del-list-btn" data-toggle="modal"
                                        data-target="#exampleModalCenter" value="<%= list._id%>">Delete</button>
                                </div>
                            </div>
                        </div>
                    </div>
                 <%  })  %>
                </div>
                <%- include("../partials/errormessage") -%>
            </div>
        </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous">
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.0/axios.min.js"
        integrity="sha512-DZqqY3PiOvTP9HkjIWgjO6ouCbq+dxqWoJZ/Q+zPYNHmlnI2dQnbJ5bxAHpAMw+LXRm4D72EIRXzvcHQtE8/VQ=="
        crossorigin="anonymous"></script>
    <script src="/scripts/listIndex.js"></script> 
</body>

</html>